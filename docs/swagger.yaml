basePath: /api/v1
definitions:
  gofiber-template_domain_dto.CreatePostRequest:
    properties:
      content:
        maxLength: 40000
        minLength: 1
        type: string
      isDraft:
        description: true = save as draft (for video encoding)
        type: boolean
      mediaIds:
        items:
          type: string
        type: array
      sourcePostId:
        description: For crossposting
        type: string
      tags:
        items:
          type: string
        maxItems: 5
        type: array
      title:
        maxLength: 300
        minLength: 1
        type: string
    required:
    - content
    - title
    type: object
  gofiber-template_domain_dto.CreateUserRequest:
    properties:
      displayName:
        maxLength: 100
        minLength: 1
        type: string
      email:
        maxLength: 255
        type: string
      password:
        maxLength: 72
        minLength: 8
        type: string
      username:
        maxLength: 20
        minLength: 3
        type: string
    required:
    - displayName
    - email
    - password
    - username
    type: object
  gofiber-template_domain_dto.ExchangeCodeRequest:
    properties:
      code:
        type: string
      state:
        type: string
    required:
    - code
    type: object
  gofiber-template_domain_dto.ExchangeCodeResponse:
    properties:
      isNewUser:
        type: boolean
      token:
        type: string
      user:
        $ref: '#/definitions/gofiber-template_domain_dto.UserResponse'
    type: object
  gofiber-template_domain_dto.LoginRequest:
    properties:
      email:
        maxLength: 255
        type: string
      password:
        minLength: 1
        type: string
    required:
    - email
    - password
    type: object
  gofiber-template_domain_dto.OAuthLoginResponse:
    properties:
      isNewUser:
        type: boolean
      needsProfile:
        description: True if user needs to complete profile (e.g., choose username)
        type: boolean
      token:
        type: string
      user:
        $ref: '#/definitions/gofiber-template_domain_dto.UserResponse'
    type: object
  gofiber-template_domain_dto.OAuthURLResponse:
    properties:
      url:
        type: string
    type: object
  gofiber-template_domain_dto.UpdatePostRequest:
    properties:
      content:
        maxLength: 40000
        minLength: 1
        type: string
      tags:
        items:
          type: string
        maxItems: 5
        type: array
      title:
        maxLength: 300
        minLength: 1
        type: string
    type: object
  gofiber-template_domain_dto.UpdateUserRequest:
    properties:
      avatar:
        maxLength: 500
        type: string
      bio:
        maxLength: 500
        type: string
      displayName:
        maxLength: 100
        minLength: 1
        type: string
      location:
        maxLength: 100
        type: string
      website:
        maxLength: 255
        type: string
    type: object
  gofiber-template_domain_dto.UserResponse:
    properties:
      avatar:
        type: string
      bio:
        type: string
      createdAt:
        type: string
      displayName:
        type: string
      email:
        description: Only for owner
        type: string
      followersCount:
        type: integer
      followingCount:
        type: integer
      id:
        type: string
      isActive:
        type: boolean
      isFollowing:
        description: Only when authenticated
        type: boolean
      karma:
        type: integer
      location:
        type: string
      role:
        type: string
      updatedAt:
        type: string
      username:
        type: string
      website:
        type: string
    type: object
  gofiber-template_pkg_health.CheckResult:
    properties:
      duration:
        $ref: '#/definitions/time.Duration'
      error:
        type: string
      message:
        type: string
      status:
        $ref: '#/definitions/gofiber-template_pkg_health.Status'
      timestamp:
        type: string
    type: object
  gofiber-template_pkg_health.HealthCheck:
    properties:
      checks:
        additionalProperties:
          $ref: '#/definitions/gofiber-template_pkg_health.CheckResult'
        type: object
      status:
        $ref: '#/definitions/gofiber-template_pkg_health.Status'
      timestamp:
        type: string
      uptime:
        type: string
      version:
        type: string
    type: object
  gofiber-template_pkg_health.Status:
    enum:
    - healthy
    - unhealthy
    - degraded
    type: string
    x-enum-varnames:
    - StatusHealthy
    - StatusUnhealthy
    - StatusDegraded
  gofiber-template_pkg_metrics.MetricsSnapshot:
    properties:
      avg_response_time_ms:
        type: number
      custom_counters:
        additionalProperties:
          format: int64
          type: integer
        type: object
      failed_requests:
        type: integer
      max_response_time_ms:
        type: integer
      min_response_time_ms:
        type: integer
      status_2xx:
        type: integer
      status_3xx:
        type: integer
      status_4xx:
        type: integer
      status_5xx:
        type: integer
      successful_requests:
        type: integer
      total_errors:
        type: integer
      total_requests:
        type: integer
      uptime:
        type: string
    type: object
  interfaces_api_handlers.BatchConfirmResult:
    properties:
      error:
        type: string
      fileKey:
        type: string
      fileUrl:
        type: string
      mediaId:
        type: string
      success:
        type: boolean
    type: object
  interfaces_api_handlers.BatchConfirmUploadRequest:
    properties:
      uploads:
        items:
          $ref: '#/definitions/interfaces_api_handlers.ConfirmUploadRequest'
        maxItems: 200
        minItems: 1
        type: array
    required:
    - uploads
    type: object
  interfaces_api_handlers.BatchConfirmUploadResponse:
    properties:
      failCount:
        type: integer
      failed:
        items:
          $ref: '#/definitions/interfaces_api_handlers.BatchConfirmResult'
        type: array
      successCount:
        type: integer
      successful:
        items:
          $ref: '#/definitions/interfaces_api_handlers.BatchConfirmResult'
        type: array
      total:
        type: integer
    type: object
  interfaces_api_handlers.BatchPresignedUploadRequest:
    properties:
      files:
        items:
          $ref: '#/definitions/interfaces_api_handlers.PresignedUploadRequest'
        maxItems: 200
        minItems: 1
        type: array
    required:
    - files
    type: object
  interfaces_api_handlers.BatchPresignedUploadResponse:
    properties:
      total:
        type: integer
      uploads:
        items:
          $ref: '#/definitions/interfaces_api_handlers.PresignedUploadResponse'
        type: array
    type: object
  interfaces_api_handlers.ConfirmUploadRequest:
    properties:
      contentType:
        description: MIME type
        type: string
      duration:
        description: For videos (seconds)
        type: number
      fileKey:
        type: string
      fileSize:
        type: integer
      height:
        description: For images/videos
        type: integer
      mediaId:
        type: string
      sourceId:
        description: ID of the source entity
        type: string
      sourceType:
        description: '"post", "message", "reel", etc.'
        type: string
      thumbnail:
        description: For videos
        type: string
      width:
        description: For images/videos
        type: integer
    required:
    - fileKey
    - fileSize
    - mediaId
    type: object
  interfaces_api_handlers.PresignedUploadRequest:
    properties:
      contentType:
        type: string
      fileSize:
        minimum: 1
        type: integer
      filename:
        type: string
      mediaType:
        enum:
        - image
        - video
        - file
        type: string
    required:
    - contentType
    - fileSize
    - filename
    - mediaType
    type: object
  interfaces_api_handlers.PresignedUploadResponse:
    properties:
      expiresAt:
        description: When the presigned URL expires
        type: string
      fileKey:
        description: R2 object key
        type: string
      fileUrl:
        description: Final public URL after upload
        type: string
      mediaId:
        description: Media ID for tracking
        type: string
      uploadUrl:
        description: Presigned URL for frontend to upload
        type: string
    type: object
  time.Duration:
    enum:
    - -9223372036854775808
    - 9223372036854775807
    - 1
    - 1000
    - 1000000
    - 1000000000
    - 60000000000
    - 3600000000000
    format: int64
    type: integer
    x-enum-varnames:
    - minDuration
    - maxDuration
    - Nanosecond
    - Microsecond
    - Millisecond
    - Second
    - Minute
    - Hour
host: localhost:3000
info:
  contact:
    email: support@example.com
    name: API Support
  description: Social media platform backend API with real-time chat, posts, comments,
    and notifications
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: GoFiber Social Media API
  version: "1.0"
paths:
  /api/v1/media/confirm-upload:
    post:
      consumes:
      - application/json
      description: Creates media record after successful frontend upload to R2
      parameters:
      - description: Confirm upload request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/interfaces_api_handlers.ConfirmUploadRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Confirm upload completion
      tags:
      - media
  /api/v1/media/presigned-upload:
    post:
      consumes:
      - application/json
      description: Generates a presigned URL for frontend to upload files directly
        to R2
      parameters:
      - description: Upload request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/interfaces_api_handlers.PresignedUploadRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/interfaces_api_handlers.PresignedUploadResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Generate presigned upload URL
      tags:
      - media
  /api/v1/media/presigned-upload-batch:
    post:
      consumes:
      - application/json
      description: Generates multiple presigned URLs for frontend to upload files
        directly to R2 (max 200 files)
      parameters:
      - description: Batch upload request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/interfaces_api_handlers.BatchPresignedUploadRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/interfaces_api_handlers.BatchPresignedUploadResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Generate batch presigned upload URLs
      tags:
      - media
  /api/v1/upload/confirm-batch:
    post:
      consumes:
      - application/json
      description: Creates multiple media records after successful frontend uploads
        to R2
      parameters:
      - description: Batch confirm upload request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/interfaces_api_handlers.BatchConfirmUploadRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/interfaces_api_handlers.BatchConfirmUploadResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Batch confirm upload completion
      tags:
      - media
  /auth/exchange:
    post:
      consumes:
      - application/json
      description: Exchange authorization code for JWT token
      parameters:
      - description: Exchange code request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/gofiber-template_domain_dto.ExchangeCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/gofiber-template_domain_dto.ExchangeCodeResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
      summary: Exchange authorization code for token
      tags:
      - OAuth
  /auth/google:
    get:
      consumes:
      - application/json
      description: Get Google OAuth authorization URL to start OAuth flow
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/gofiber-template_domain_dto.OAuthURLResponse'
      summary: Get Google OAuth URL
      tags:
      - OAuth
  /auth/google/callback:
    get:
      consumes:
      - application/json
      description: Process Google OAuth callback and login/register user
      parameters:
      - description: Authorization code from Google
        in: query
        name: code
        required: true
        type: string
      - description: State parameter for CSRF protection
        in: query
        name: state
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/gofiber-template_domain_dto.OAuthLoginResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
      summary: Handle Google OAuth Callback
      tags:
      - OAuth
  /auth/login:
    post:
      consumes:
      - application/json
      description: Login with email and password
      parameters:
      - description: Login credentials
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/gofiber-template_domain_dto.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Login successful with token
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid credentials
          schema:
            additionalProperties: true
            type: object
      summary: User login
      tags:
      - Authentication
  /auth/register:
    post:
      consumes:
      - application/json
      description: Register a new user account
      parameters:
      - description: User registration data
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/gofiber-template_domain_dto.CreateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: User registered successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Validation failed
          schema:
            additionalProperties: true
            type: object
      summary: User registration
      tags:
      - Authentication
  /health:
    get:
      description: Check overall system health
      produces:
      - application/json
      responses:
        "200":
          description: System is healthy
          schema:
            $ref: '#/definitions/gofiber-template_pkg_health.HealthCheck'
        "503":
          description: System is unhealthy
          schema:
            $ref: '#/definitions/gofiber-template_pkg_health.HealthCheck'
      summary: Health check
      tags:
      - Health
  /health/live:
    get:
      description: Check if application is alive
      produces:
      - application/json
      responses:
        "200":
          description: Application is alive
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Liveness probe
      tags:
      - Health
  /health/ready:
    get:
      description: Check if application is ready to serve traffic
      produces:
      - application/json
      responses:
        "200":
          description: Application is ready
          schema:
            additionalProperties: true
            type: object
        "503":
          description: Application is not ready
          schema:
            additionalProperties: true
            type: object
      summary: Readiness probe
      tags:
      - Health
  /metrics:
    get:
      description: Get current application metrics including requests, response times,
        and status codes
      produces:
      - application/json
      responses:
        "200":
          description: Current metrics
          schema:
            $ref: '#/definitions/gofiber-template_pkg_metrics.MetricsSnapshot'
      summary: Get application metrics
      tags:
      - Metrics
  /posts:
    post:
      consumes:
      - application/json
      description: Create a new post with title, content, and media
      parameters:
      - description: Post data
        in: body
        name: post
        required: true
        schema:
          $ref: '#/definitions/gofiber-template_domain_dto.CreatePostRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Post created successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Validation failed
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Create a new post
      tags:
      - Posts
  /posts/{id}:
    get:
      consumes:
      - application/json
      description: Get a single post by ID with author and media information
      parameters:
      - description: Post ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Post retrieved successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid post ID
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Post not found
          schema:
            additionalProperties: true
            type: object
      summary: Get post by ID
      tags:
      - Posts
    put:
      consumes:
      - application/json
      description: Update an existing post (author only)
      parameters:
      - description: Post ID
        in: path
        name: id
        required: true
        type: string
      - description: Post update data
        in: body
        name: post
        required: true
        schema:
          $ref: '#/definitions/gofiber-template_domain_dto.UpdatePostRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Post updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Update post
      tags:
      - Posts
  /users/profile:
    get:
      consumes:
      - application/json
      description: Get authenticated user's profile
      produces:
      - application/json
      responses:
        "200":
          description: Profile retrieved successfully
          schema:
            additionalProperties: true
            type: object
        "401":
          description: User not authenticated
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get user profile
      tags:
      - Users
    put:
      consumes:
      - application/json
      description: Update authenticated user's profile
      parameters:
      - description: Profile update data
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/gofiber-template_domain_dto.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Profile updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Validation failed
          schema:
            additionalProperties: true
            type: object
        "401":
          description: User not authenticated
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Update user profile
      tags:
      - Users
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
